
## 输入参数

| options               |                                                                                                                                        |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| --help                |                                                                                                                                        |
| --inputFile           | String <br /> 输入文件以 JSON 格式描述待求解问题                                                                                                    |
| --output              | String  <br /> 将评测结果输出到 JSON 格式文件。若未指定文件，默认文件名为 'output.json'                                                                                                   |
| --outputScreen        | Int (=1)  <br /> 输出文件的详细程度（=1 显示全部，=2 显示问题摘要、起点与实际路径，=3 仅显示问题摘要）。                                                                                                |
| --simulationTime      | Int <br /> 求解问题所允许的最大时间步数，有时也称规划视野                                                                                             |
| --fileStoragePath              | String  <br /> 大文件存储路径。若未指定该参数，程序将从环境变量 `$LORR_LARGE_FILE_STORAGE_PATH` 读取。若已指定，则忽略环境变量。                                                                                                |
| --planTimeLimit       | Int <br /> 每个时间步可用于规划的时间（毫秒）。若规划器超过该时间限制，该时间步所有机器人将被下发等待命令，任务调度与上一时间步相同。注意 2023 轮次中 planTimeLimit 为每时间步规划时间（秒），若使用 2023 参赛者的规划器请仔细检查规划器中的超时设置。                                                                                 |
| --preprocessTimeLimit | Int <br /> 问题求解开始前可用于加载与预计算辅助数据的时间（毫秒）                                                                                              |
| --logFile             | String  <br /> 记录规划器产生无效或不完整动作时仿真器发出的所有警告与错误的输出文件                                                                                                     |
| --logDetailLevel      | Int (=1) <br /> 要显示的日志消息最低严重级别，1--显示所有消息，2--显示警告与致命错误，3--仅显示致命错误 |


## 输入问题文件（JSON 格式）

此处所有路径均为相对于输入 JSON 文件所在位置的相对路径

| properties             |                                                                                                                                                                                                                                                |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| mapFile                | String <br /> 描述栅格环境输入的文件的相对路径。我们使用下一节描述的栅格地图格式（含指向相关小节的链接）                                                                                                                                                                  |
| agentFile              | String <br /> 描述机器人起点位置的文件相对路径。第一行为机器人数量 n。接下来 n 行对应 n 个机器人的起点位置。* |
| taskFile               | String <br /> 描述任务位置的文件相对路径。第一行为任务数量 m。接下来 m 行每行包含多个整数，每个整数对应任务在栅格上的一个位置，\* 同一行中位置的顺序表示该任务应完成的顺序。               |
| teamSize               | Int <br /> 仿真中的机器人数量                                                                                                                                                                                                       |
| numTasksReveal         | Float <br /> 任务池中发布任务的倍数。我们始终在任务池中保持 numTasksReveal 倍 teamSize 个已发布任务。若某时间步有 k 个任务完成，系统会向任务池加入 k 个任务。                                                                                                                                                                                        |

\* 我们将二维坐标线性化并用单个整数表示一个位置。给定位置 (row,column) 及地图高度（总行数）与宽度（总列数），线性化位置 = row*width+column。

## 地图文件格式

所有地图均以以下行开头：

> type octile <br />
> height y <br />
> width x <br />
> map <br />

地图符号：
| symbols                |                                                                                                                                                                                                                                                |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| @                      | 硬障碍。                                                                                                                                                                  |
| T                      | 硬障碍（游戏环境中的「树木」）。                                                                                                                                                                  |
| .                      | 自由空间 |
| E                      | 发射点（用于「配送」目标）- 可通行              |
| S                      | 服务点（用于「取货」目标）- 可通行                                                                                                                                                                                                        |


## 输出文件（JSON 格式）

`./lifelong` 的输出文件为 JSON 格式，包含规划器输出、机器人实际路径及统计信息。

下表定义输出文件中出现的属性。

| properties      |                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| actionModel     | String <br /> 仿真器中机器人使用的动作模型名称，该值始终为 "MAPF_T"，表示带转向的 MAPF（即机器人可朝向四个主方向之一，可用动作为前进、顺时针旋转、逆时针旋转与等待）                                                                                                                                                                                                                                                                                                  |
| teamSize        | Int <br /> 仿真中的机器人数量                                                                                                                                                                                                                                                                                                                                                     |
| start           | List <br /> 起点位置列表。列表长度为机器人数量。                                                                                                                                                                                                                                                                                           |
| numTaskFinished | Int <br /> 已完成任务数。                                                                                                                                                                                                                                                                                                                                             |
| sumOfCost       | Int <br />                                                                                                                                                                                                                                                                                                                                                                      |
| makespan        | Int <br />                                                                                                                                                                                                                                                                                                                                                                 |
| actualPaths     | List <br /> n 个字符串的列表，n 为机器人数量。每个字符串表示一串动作符号，以逗号（","）分隔。<br />  动作符号： <br />+ "F"  前进 <br />+ "R" 顺时针旋转 <br /> + "C" 逆时针旋转 <br />+ "W" 等待 <br /> + "T" 隐式等待（仅出现在 plannerPaths 中，对应规划器超时或缺失动作） |
| plannerPaths    | List<br /> n 个字符串的列表，n 为机器人数量。每个字符串表示一串动作符号，以逗号分隔。                                                                                                                                                                                                                                      |
| plannerTimes    | List <br /> entry 每次规划回合的计算时间（秒）列表。                                                                                                                                                                                                                                                                          |
| errors          | List <br /> 动作错误列表。每个错误由列表 [task_id, robot1, robot2, timestep, description] 表示，其中 robot1、robot2、timestep 为整数，description 为字符串。robot1 与 robot2 对应涉错机器人的 id（仅涉及一个机器人时 robot2=-1）。description 为错误消息。  |
| actualSchedule | List <br /> n 个字符串的列表，n 为机器人数量。每个字符串表示新的/更新的（有效）首个任务调度及其变更时间，以 "," 分隔。每个任务调度中，时间与任务调度以 ":" 分隔，任务调度包含该智能体的首个任务，例如 "0:0,5:3," 表示某智能体在时间步 0 将任务 0 调度为首个任务，在时间步 5 将任务 3 调度为首个任务。|
| plannerSchedule | List <br /> n 个字符串的列表，n 为机器人数量。每个字符串表示 taskScheduler 提议的新的/更新的（有效或无效）任务调度及其变更时间，以 "," 分隔。 |
| events          | List <br /> （任务）事件列表。每个事件由列表 [timestep, agent_id, task_id, sequence_id] 表示，均为整数。sequence_id 表示任务进度及智能体正在前往的任务中的哪个差事，也表示该任务中已完成多少个差事。                                                                                                                  |
| scheduleErrors          | List <br /> 调度错误列表。每个错误由列表 [task_id, robot1, robot2, timestep, description] 表示，其中 task_id、robot1、robot2、timestep 为整数，description 为字符串。robot1 与 robot2 对应涉错机器人的 id（仅涉及一个机器人时 robot2=-1）。description 为错误消息。  |
| tasks           | List <br /> 任务列表。每个任务由表示任务各位置的多个整数列表 [id, release_time, errand_sequence] 表示，errand_sequence 为差事位置列表：[x1,y1,x2,y2, ... ... ]|
| numPlannerErrors | Int <br /> 规划器错误（无效动作）数量。 |
| numScheduleErrors | Int <br /> 调度错误（无效调度）数量。 |
| numEntryTimeouts | Int <br /> entry 超时次数。 |



